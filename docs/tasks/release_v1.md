# Задачи, реализуемые в рамках релиза 1

## TASK-5 Регистрация в программе лояльности

### Use Case

[UC-5 Зарегистрироваться в программе лояльности](../requirements.md#use-case_5)

### Тест-кейсы

Основной сценарий:

Предусловие:

1. Успешно выполнен тест-кейс **“Добавить блюда в заказ”,** пользователь видит экран **Акционные предложения**
2. Таблица клиентов пустая.

| Шаг | Описание шага | Результат |
| --- | --- | --- |
| 1	| Нажать кнопку Применить под Акционным предложением скидка 10% за комбо-товар Бургер + Напиток + Картошка.	| Пользователь видит экран Как комплектовать заказ? |
| 2	| Нажать кнопку В зале	| Пользователь видит экран Участие в бонусной системе |
| 3	| Нажать панель Зарегистрироваться	| Пользователь видит экран Регистрация |
| 4	| Ввести номер телефона: пользователь вводит 79999999999 | 	Пользователь видит введенный номер телефона |
| 5	| Ввести имя: пользователь вводит Андрей | Пользователь видит введенное имя |
| 6	| Загрузить фото: пользователь нажимает кнопку Загрузить фото и выбирает фотографии из галереи мобильного телефона	| Пользователь видит, что выбранная фотография отображается на форме. |
| 7	| Ввести e-mail: пользователь вводит user@mail.ru | Пользователь видит введенный e-mail |
| 8	| Нажать кнопку Сохранить | Клиент зарегистрирован, пользователь видит экран с заголовком “У вас накоплено 0 бонусов" |
| 9	| Нажать панель Накопить | 	Пользователь видит экран Проверка заказа:<br/>Гамбургер 1 шт. 300 руб<br/>Комбо-товар (Гамбургер 270 руб.<br/>Кола 1 шт. 270 руб.<br/>Картошка 1 шт. 270 руб.)<br/>Итого: 1100 руб.<br/>Начислить бонусов: 110 руб.<br/>Комплектация: в зале<br/>| 10 | Нажать кнопку Далее	| Пользователь видит экран Оплата заказа |

Альтернативные сценарии:

- Клиент уже зарегистрирован

Предусловие:

1. Успешно выполнен основной сценарий
2. Успешно выполнен тест-кейс **“Добавить блюда в заказ”,** пользователь видит экран **Акционные предложения**

| Шаг | Описание шага | Результат |
| --- | --- | --- |
| 1	| Нажать кнопку Применить под Акционным предложением скидка 10% за комбо-товар Бургер + Напиток + Картошка.	| Пользователь видит экран Как комплектовать заказ? |
| 2	| Нажать кнопку В зале	| Пользователь видит экран Участие в бонусной системе |
| 3	| Нажать панель Зарегистрироваться	| Пользователь видит экран Регистрация |
| 4	| Нажать кнопку Далее	| Пользователь видит экран Как комплектовать заказ? |
| 5	| Нажать кнопку На вынос	| Пользователь видит экран Участие в бонусной системе |
| 6	| Нажать панель Войти в профиль	| Пользователь видит экран Вход в профиль |
| 7	| Выполнить тест-кейс “Авторизация клиента”	| Тест-кейс выполнен успешно, пользователь видит экран с заголовком “У вас накоплено 110 бонусов” |
| 8	| Нажать панель Списать	| Пользователь видит экран Проверка заказа:<br/>Гамбургер 2 шт. 300 руб<br/>Кола 1 шт. 300 руб<br/>Итого: 1200 руб.<br/>Списать бонусы: 110 руб.<br/>Комплектация: на вынос
| 9	| Нажать кнопку Далее	| Пользователь видит экран Оплата заказа |

Негативные сценарии:

- Регистрация клиента с уже зарегистрированным номером телефона  (выполняется после успешного выполнения основного сценария)

| Шаг | Описание шага | Результат |
| --- | --- | --- |
| 1	| Нажать кнопку Применить под Акционным предложением скидка 10% за комбо-товар Бургер + Напиток + Картошка.	| Пользователь видит экран Как комплектовать заказ? |
| 2	| Нажать кнопку В зале	| Пользователь видит экран Участие в бонусной системе |
| 3	| Нажать панель Зарегистрироваться	| Пользователь видит экран Регистрация |
| 4	| Ввести номер телефона: пользователь вводит 79999999999 | 	Пользователь видит введенный номер телефона |
| 5	| Ввести имя: пользователь вводит Андрей | Пользователь видит введенное имя |
| 6	| Нажать кнопку Сохранить | Выводится окно с сообщением: Пользователь с номером телефона 79999999999 существует" |
| 7	| Нажать кнопку OK | Окно с сообщением закрывается, пользователь возвращается в форму регистрации клиента и видит заполненные на шагах 1-2 данные |

Номер телефона не соответствует формату

| Шаг | Описание шага | Результат |
| --- | --- | --- |
| 1	| Нажать кнопку Применить под Акционным предложением скидка 10% за комбо-товар Бургер + Напиток + Картошка.	| Пользователь видит экран Как комплектовать заказ? |
| 2	| Нажать кнопку В зале	| Пользователь видит экран Участие в бонусной системе |
| 3	| Нажать панель Зарегистрироваться	| Пользователь видит экран Регистрация |
| 4	| Ввести номер телефона: пользователь вводит Андрей | 	Пользователь видит введенный номер телефона |
| 5	| Ввести имя: пользователь вводит Андрей | Пользователь видит введенное имя |
| 6	| Нажать кнопку Сохранить | Выводится окно с сообщением: Номер телефона не соответствует формату |
| 7	| Нажать кнопку OK | Окно с сообщением закрывается, пользователь возвращается в форму регистрации клиента и видит заполненные на шагах 1-2 данные |


## TASK-6 Оплата банковской картой

### Use Case

[UC-6 Произвести оплату банковской картой](../requirements.md#use-case_6)

### Тест-кейсы

Предусловие:

1. Пользователь находится на стартовом экране приложения.
2. В базе данных Меню присутствуют товары:
    1. Гамбургер (категория Бургеры), цена 300 р.
    2. Кола (категория Напитки), цена 300 р.
    3. Картошка, цена 300 р.
3. В таблицах Basket и Orders базы данных Orders и таблице Payments базы данных Payments отсутствуют записи.
4. В базе данных создано тестовое акционное предложение: скидка 10% за комбо-товар Бургер + Напиток + Картошка.
5. Система настроена на начисление баллами 10% от стоимости заказа.

Основной сценарий:

| Шаг | Описание шага | Результат |
| --- | --- | --- |
| 1	| Выполнить тест-кейс “Добавить блюда в заказ”	| Тест-кейс выполнен успешно, пользователь видит экран с акционным предложением |
| 2	| Выполнить тест-кейс “Заполнить параметры заказа”	| Тест-кейс выполнен успешно, пользователь видит экран “Оплата заказа” | 
| 3	| Активировать панель Оплата картой и нажать кнопку Далее. | 	Пользователь видит форму процессинга банка, заполняет реквизиты оплаты и возвращается на стартовый экран приложения с категориями меню,  в таблице Orders базы данных Orders появляется новый заказ на сумму 1100 руб, статус заказа - “Оплачен”, в таблице Payments появляется запись, соответствующая оплате, пользователь получает СМС с номером заказа. |

Альтернативные сценарии:

- Отказ оплаты картой


| Шаг | Описание шага | Результат |
| --- | --- | --- |
| 1	| Выполнить тест-кейс “Добавить блюда в заказ”	| Тест-кейс выполнен успешно, пользователь видит экран с акционным предложением |
| 2	| Выполнить тест-кейс “Заполнить параметры заказа” | Тест-кейс выполнен успешно, пользователь видит экран “Оплата заказа” |
| 3	| Клиент нажимает Отменить. | Пользователь видит стартовый экран приложения с категориями меню. В таблицах Basket и Orders базы данных Orders и таблице Payments базы данных Payments отсутствуют записи. |

Негативные сценарии:

- Во время оплаты происходит сбой: нет связи с банком,
- Во время оплаты происходит сбой: недостаточно средств на карте,
- Во время оплаты происходит сбой: карта заблокирована.


